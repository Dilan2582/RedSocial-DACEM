
 /* ====== LIGHT ====== */
    :root{
      --bg:#f5f3ff; --bg2:#efeaff; --panel:#ffffff; --card:#ffffff;
      --line:rgba(16,24,40,.08);
      --text:#151826; --muted:#6b7280;
      --primary:#7c5cfc; --primary2:#a855f7; --accent:#22d3ee;
      --ring:rgba(124,92,252,.28);
      --shadow:0 12px 28px rgba(2,6,23,.08);
      --r:18px;
    }
    /* ====== DARK (Neo-Purple) ====== */
    [data-theme="dark"]{
      --bg:#0a0b14; --bg2:#0d1022; --panel:#0f1324; --card:#11162b;
      --line:rgba(255,255,255,.08);
      --text:#e7e9f3; --muted:#9aa3b2;
      --primary:#8b5cf6; --primary2:#d946ef; --accent:#22d3ee;
      --ring:rgba(139,92,246,.25);
      --shadow:0 12px 28px rgba(0,0,0,.45);
    }

    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:'Plus Jakarta Sans',system-ui,Segoe UI,Roboto,Arial}

    /* Fondo glow */
    body::before,body::after{content:"";position:fixed;inset:auto;pointer-events:none;z-index:-1}
    body::before{top:-15%;left:-10%;width:65vw;height:55vh;filter:blur(90px);
      background:
        radial-gradient(50% 50% at 50% 50%, rgba(124,92,252,.28) 0%, rgba(124,92,252,0) 65%),
        radial-gradient(50% 50% at 20% 30%, rgba(168,85,247,.18) 0%, rgba(168,85,247,0) 70%);
    }
    body::after{right:-10%;top:10%;width:55vw;height:50vh;filter:blur(90px);
      background:
        radial-gradient(50% 50% at 50% 50%, rgba(34,211,238,.18) 0%, rgba(34,211,238,0) 65%),
        radial-gradient(50% 50% at 70% 30%, rgba(168,85,247,.12) 0%, rgba(168,85,247,0) 70%);
    }
    [data-theme="dark"] body::before,[data-theme="dark"] body::after{display:none}

    /* Topbar */
    .topbar{position:sticky;top:0;z-index:50;background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7));backdrop-filter: blur(10px);border-bottom:1px solid var(--line)}
    [data-theme="dark"] .topbar{background:linear-gradient(180deg, rgba(10,11,20,.92), rgba(10,11,20,.65))}
    .topbar-inner{max-width:1200px;margin:0 auto;padding:14px 24px;display:flex;align-items:center;gap:16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .logo-badge{width:28px;height:28px;border-radius:9px;background:linear-gradient(135deg,var(--primary),var(--primary2));box-shadow:0 0 0 6px rgba(124,92,252,.12),0 10px 25px rgba(124,92,252,.25);overflow:hidden;position:relative;display:grid;place-items:center}
    .logo-badge img{width:100%;height:100%;object-fit:cover;border-radius:inherit}
    .logo-badge::after{content:"";position:absolute;inset:0;border-radius:inherit;box-shadow:inset 0 0 0 2px rgba(255,255,255,.06);pointer-events:none}

    /* Botones */
    .btn{appearance:none;border:1px solid var(--line);background:var(--panel);color:var(--text);padding:10px 16px;border-radius:999px;font-weight:700;cursor:pointer;transition:.15s ease;font-size:.9rem;display:inline-flex;align-items:center;gap:8px}
    .btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.10)}
    .btn:active{transform:translateY(0)}
    .btn:focus{outline:2px solid var(--ring);outline-offset:2px}
    .btn.primary{background:linear-gradient(90deg,var(--primary),var(--primary2));border-color:transparent;color:#fff;box-shadow:0 8px 18px rgba(124,92,252,.28)}
    .btn.ghost{background:transparent;border:1px solid var(--line)}
    .btn.small{padding:8px 14px;font-size:.85rem}
    .btn.danger{background:#fee2e2;border-color:#fecaca;color:#7f1d1d}
    [data-theme="dark"] .btn.danger{background:#3b1d2a;border-color:#6b233a;color:#fce7f3}

    /* Layout */
    .wrap{max-width:1200px;margin:0 auto;padding:28px 24px}
    .layout{display:grid;grid-template-columns:260px 1fr 340px;gap:28px}
    @media (max-width:1080px){ .layout{grid-template-columns:1fr;gap:24px} .sidebar{order:3} .aside{order:2} }

    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);transition:.2s ease}
    .card:hover{box-shadow:0 16px 40px rgba(124,92,252,.12)}

    /* Sidebar */
    .sidebar{position:sticky; top:84px; align-self:start; height:max-content}
    .nav{display:grid;gap:10px;padding:14px}
    .nav-item{display:flex;gap:12px;align-items:center;padding:12px 14px;border-radius:12px;color:var(--text);text-decoration:none;border:1px solid transparent;transition:.15s ease}
    .nav-item:hover{background:rgba(124,92,252,.08);border-color:rgba(124,92,252,.15)}
    .nav-item.active{background:rgba(124,92,252,.15);border-color:rgba(124,92,252,.35);color:var(--primary)}
    .nav-ico{width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center}
    .nav-ico svg{width:22px;height:22px;stroke:currentColor;fill:none;stroke-width:2}

    /* Aside */
    .aside{position:sticky; top:84px; align-self:start; height:max-content}

    /* Composer */
    .composer{padding:18px;display:grid;gap:14px;background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);margin-bottom:24px}
    .cmp-row{display:flex;gap:14px;align-items:flex-start}
    .cmp-avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--primary2));flex-shrink:0}
    .cmp-input{flex:1;min-height:90px;background:#f6f7fb;border:1px solid var(--line);border-radius:14px;color:var(--text);padding:14px;outline:none;font-size:.95rem;font-family:inherit}
    [data-theme="dark"] .cmp-input{background:#0b0f1d}
    .cmp-input:focus{box-shadow:0 0 0 3px var(--ring);border-color:var(--primary)}
    .cmp-preview{display:flex;gap:10px;align-items:center}
    .cmp-preview img{max-height:180px;border-radius:12px;border:1px solid var(--line)}
    .cmp-tools{display:flex;align-items:center;gap:10px}
    .spacer{flex:1}
    .cmp-msg{font-size:.92rem;color:var(--muted);min-height:16px;text-align:center}

    /* Feed */
    .feed{display:grid;gap:20px}
    .post-card{overflow:hidden;background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);transition:.2s ease}
    .post-head{display:flex;align-items:center;gap:12px;padding:16px;border-bottom:1px solid var(--line)}
    .post-ava{width:44px;height:44px;border-radius:50%;object-fit:cover;background:linear-gradient(135deg,var(--primary),var(--primary2))}
    .post-user{display:grid;line-height:1.2;flex:1}
    .post-name{font-weight:700;color:var(--text);text-decoration:none}
    .post-name:hover{color:var(--primary)}
    .post-userid{color:var(--muted);font-size:.85rem}
    .post-media{position:relative;background:#f6f7fb;cursor:pointer}
    [data-theme="dark"] .post-media{background:#0b0f1d}
    .post-media img{display:block;width:100%;height:auto;object-fit:cover}
    .post-media.ratio-square img{aspect-ratio:1/1}
    .post-media.ratio-portrait img{aspect-ratio:4/5}
    .post-media.ratio-landscape img{aspect-ratio:16/9}
    .post-actions{display:flex;gap:12px;align-items:center;padding:14px 16px;border-top:1px solid var(--line)}
    .btn-icon{display:inline-flex;align-items:center;justify-content:center;width:48px;height:44px;border-radius:999px;border:1px solid transparent;background:transparent;color:var(--text);cursor:pointer;transition:.15s ease}
    .btn-icon:hover{background:rgba(124,92,252,.08)}
    .btn-icon:active{background:rgba(124,92,252,.15);transform:scale(0.95)}
    .btn-icon i,.btn-icon svg{width:24px;height:24px}
    .btn-icon svg{stroke: currentColor; fill: none; stroke-width: 2;}
    .btn-icon[aria-pressed="true"]{color:var(--accent)}
    .post-counts{color:var(--muted);font-size:.9rem;font-weight:600}
    .post-caption{padding:0 16px 16px;color:var(--text);line-height:1.5;font-size:.95rem}

    /* People */
    .people-list{display:grid;gap:14px}
    .person-row{display:flex;flex-direction:column;gap:12px;border:1px solid var(--line);border-radius:16px;padding:14px;background:var(--panel);transition:.2s ease}
    .person-row:hover{background:rgba(124,92,252,.06);border-color:rgba(124,92,252,.25);box-shadow:0 4px 12px rgba(124,92,252,.1)}
    .p-top{display:flex;gap:12px;align-items:center;width:100%}
    .p-avatar img{width:48px;height:48px;border-radius:50%;object-fit:cover;border:2px solid rgba(124,92,252,.2)}
    .p-info{min-width:0;flex:1}
    .p-name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--text);font-size:.95rem}
    .p-user{color:var(--muted);font-size:.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}
    .p-actions{display:flex;gap:8px;width:100%}
    .p-actions .btn{flex:1;justify-content:center;padding:8px 12px;font-size:.85rem;white-space:nowrap}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.65);z-index:100;padding:20px;backdrop-filter:blur(4px)}
    .lightbox[aria-hidden="false"]{display:flex}
    .lb-content{display:grid;grid-template-columns:min(62vw,760px) 380px;gap:0;background:var(--card);border:1px solid var(--line);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.35);overflow:hidden}
    @media (max-width:1080px){ .lb-content{grid-template-columns:1fr;max-height:85vh} }
    .lb-close{position:absolute;right:16px;top:16px;z-index:10}
    .lb-media{background:#000;display:flex;align-items:center;justify-content:center}
    .lb-media img{display:block;max-width:100%;max-height:100%;object-fit:contain}
    .lb-side{display:grid;grid-template-rows:auto 1fr auto;background:var(--panel)}
    .lb-head{display:flex;gap:12px;align-items:center;padding:16px;border-bottom:1px solid var(--line)}
    .lb-ava{width:40px;height:40px;border-radius:50%;object-fit:cover}
    .lb-body{padding:16px;display:grid;gap:12px;max-height:50vh;overflow-y:auto}
    .lb-cmt{display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:start}
    .lb-cmt .nm{font-weight:700;color:var(--text)}
    .lb-cmt .dt{color:var(--muted);font-size:.85rem;white-space:nowrap}
    .lb-input{display:flex;gap:10px;padding:16px;border-top:1px solid var(--line)}
    .lb-input input{flex:1;background:#0b0f1d;border:1px solid var(--line);border-radius:12px;color:var(--text);padding:12px}
    .lb-input input:focus{box-shadow:0 0 0 3px var(--ring)}
    /* Barra de acciones del modal */
    .lb-actions{
      display:flex;
      align-items:center;
      gap:12px;
      padding:12px 16px;
      border-top:1px solid var(--line);
      background:var(--panel);
      flex-wrap:nowrap;            /* evita que salte a otra línea */
    }

    /* Empuja y alinea el recuento a la derecha en una sola línea */
    .lb-actions .post-counts{
      margin-left:auto;            /* lo manda a la derecha (no depende del .spacer) */
      white-space:nowrap;          /* evita salto 2 · 1 */
      line-height:1;
      display:flex;
      gap:6px;                     /* pequeño espacio entre números y separador */
    }

    /* Tamaño/alineación de los íconos */
    .lb-actions .btn-icon{ width:42px; height:38px }
    .lb-actions .btn-icon svg{ width:22px; height:22px; vertical-align:middle }



    /* Responsive */
    @media(max-width:1080px){
      .wrap{padding:20px 16px}
      .layout{grid-template-columns:1fr;gap:20px}
      .sidebar,.aside{position:static}
    }
    @media(max-width:768px){
      .topbar-inner{padding:10px 12px}
      .composer{padding:14px;margin-bottom:16px}
      .cmp-avatar{width:40px;height:40px}
      .cmp-input{min-height:70px;padding:12px;font-size:0.9rem}
      .feed{gap:16px}
      .post-head{padding:12px}
      .post-actions{padding:10px 12px}
      .post-caption{padding:0 12px 12px;font-size:0.9rem}
    }
    @media(max-width:600px){
      .btn{padding:7px 12px;font-size:0.85rem}
      .cmp-input{min-height:60px}
      .btn-icon{width:40px;height:36px}
      .btn-icon i,.btn-icon svg{width:20px;height:20px}
    }

    /* Contenedor general de filtros */
    .cmp-filters-container{ display:none; gap:10px; margin-top:10px }
    .cmp-filters-container.active{ display:grid }
    .cmp-filters-label{ font-weight:700; font-size:.9rem }

    .cmp-filters-scroll{
      display:grid; grid-auto-flow:column; grid-auto-columns:110px;
      gap:10px; overflow-x:auto; padding:4px 0;
    }
    .cmp-filter-btn{
      border:1px solid var(--line); background:var(--panel); color:var(--text);
      border-radius:12px; padding:10px; white-space:nowrap; cursor:pointer;
    }
    .cmp-filter-btn.active{ border-color:#6aa2ff; box-shadow:0 0 0 2px rgba(106,162,255,.25) }

    .cmp-filter-preview{ display:none; place-items:center; position:relative; }
    .cmp-filter-preview.active{ display:grid }
    #cmpFilterPreviewImg{ max-width:100%; border-radius:12px; }
    .cmp-filter-preview-label{
      position:absolute; left:10px; bottom:10px; background:rgba(0,0,0,.55);
      color:#fff; padding:4px 8px; border-radius:8px; font-size:12px;
    }

    .cmp-filter-loading{ color:var(--muted); padding:8px }


    /* Botón con contador al lado del icono */
.btn-icon.has-count{
  width:auto;                 /* libera el ancho fijo de 48px */
  padding:6px 10px;           /* un poco de respiración */
  justify-content:flex-start; /* icono + número alineados a la izquierda */
  gap:8px;                    /* separa icono y número */
}

.btn-icon.has-count .count{
  font-weight:600;
  font-size:.95rem;
  color:var(--muted);
  line-height:1;              /* quita “salto” vertical */
  min-width:1ch;              /* evita que ‘0’ encoja */
}

.lb-actions{
  display:flex;
  align-items:center;
  gap:14px;
  padding:12px 16px;
  border-top:1px solid var(--line);
  background:var(--panel);
  flex-wrap:nowrap;
}
/* === FIX: icono + contador en línea (feed y modal) === */
.btn-icon.has-count{
  /* anulamos el tamaño fijo del botón “círculo” para que quepa el número */
  width: auto !important;
  height: auto !important;
  padding: 8px 12px !important;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  gap: 8px;              /* espacio entre el icono y el número */
}

.btn-icon.has-count .count{
  font-weight: 600;
  font-size: 0.95rem;
  color: var(--muted);
  min-width: 1ch;        /* evita “salto” del 1→2→3 */
  line-height: 1;
}

/* barra de acciones del feed: aseguramos la fila y el espacio a la derecha */
.post-actions{
  display: flex;
  align-items: center;
  gap: 12px;
}
.post-actions .spacer{ flex: 1; }

/* barra de acciones del modal (igual que en perfil) */
.lb-actions{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-top: 1px solid var(--line);
  background: var(--panel);
  flex-wrap: nowrap;
}
.lb-actions .spacer{ flex: 1; }

/* === FIX: visor responsive con letterbox consistente === */
.lb-media{
  display: grid;
  place-items: center;
  background: #000;
  min-height: 40vh;
  max-height: 85vh;
  overflow: hidden;
  border-radius: 14px;
}
.lb-media > img{
  max-width: 100%;
  max-height: 80vh;
  width: auto;
  height: auto;
  object-fit: contain;
}

/* === Feed: el slot de imagen mantiene el recorte elegante === */
.post-media{
  position: relative;
  overflow: hidden;
  border-radius: 16px;
  background: #0b0f1a;
  display: grid;
  place-items: center;
}
.post-media img.post-img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}
/* ratios ya usados por tu JS */
.ratio-square{ aspect-ratio: 1 / 1; }
.ratio-portrait{ aspect-ratio: 3 / 4; }
.ratio-landscape{ aspect-ratio: 16 / 9; }

/* === Oculta el bloque de contadores viejo para evitar duplicados === */
.post-counts{ display: none !important; }

/* Estructura correcta del panel derecho del modal */
.lb-side{
  display:grid;
  grid-template-rows: auto 1fr auto auto; /* header | comentarios (1fr) | acciones | input */
}

/* Ubicaciones explícitas de cada bloque */
.lb-head{   grid-row:1; }
.lb-body{   grid-row:2; min-height:0; }   /* permite que el scroll funcione bien */
.lb-actions{grid-row:3; }                 /* ¡aquí va la barra de like/coment! */
.lb-input{  grid-row:4; }

/* Barra de acciones: una sola línea, a la izquierda, con espacio flexible */
.lb-actions{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  border-top:1px solid var(--line);
  background:var(--panel);
  flex-wrap:nowrap;
}
.lb-actions .spacer{ flex:1; }

/* Botón con contador al lado del ícono (sin romper la fila) */
.btn-icon.has-count{
  width:auto !important;
  height:auto !important;
  padding:8px 12px !important;
  border-radius:12px;
  display:inline-flex;
  align-items:center;
  gap:8px;
}
.btn-icon.has-count .count{
  font-weight:600;
  font-size:.95rem;
  color:var(--muted);
  min-width:1ch;
  line-height:1;
}
