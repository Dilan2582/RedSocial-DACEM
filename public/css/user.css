/* =========================================
   THEME
========================================= */
/* LIGHT */
:root{
  --bg:#f5f3ff; --bg2:#efeaff; --panel:#ffffff; --card:#ffffff;
  --line:rgba(16,24,40,.08);
  --text:#151826; --muted:#6b7280;
  --primary:#7c5cfc; --primary2:#a855f7; --accent:#22d3ee;
  --ring:rgba(124,92,252,.28);
  --shadow:0 12px 28px rgba(2,6,23,.08);
  --r:18px;

  /* Layout */
  --header-height: 68px;
  --content-max-width: 1400px;
  --sidebar-width: 280px;
  --aside-width: 360px;

  /* Preview (más pequeño) */
  --preview-max-w: 420px;
  --preview-max-h: 300px;
  --preview-max-h-sm: 220px;
}

/* DARK */
[data-theme="dark"]{
  --bg:#0a0b14; --bg2:#0d1022; --panel:#0f1324; --card:#11162b;
  --line:rgba(255,255,255,.08);
  --text:#e7e9f3; --muted:#9aa3b2;
  --primary:#8b5cf6; --primary2:#d946ef; --accent:#22d3ee;
  --ring:rgba(139,92,246,.25);
  --shadow:0 12px 28px rgba(0,0,0,.45);
}

/* =========================================
   RESET
========================================= */
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);
     font-family:'Plus Jakarta Sans',system-ui,Segoe UI,Roboto,Arial}
*,*::before,*::after{box-sizing:border-box}
img{max-width:100%;height:auto;display:block}

/* Glow (solo light) */
body::before,body::after{content:"";position:fixed;inset:auto;pointer-events:none;z-index:-1}
body::before{top:-15%;left:-10%;width:65vw;height:55vh;filter:blur(90px);
  background:
    radial-gradient(50% 50% at 50% 50%, rgba(124,92,252,.28) 0%, rgba(124,92,252,0) 65%),
    radial-gradient(50% 50% at 20% 30%, rgba(168,85,247,.18) 0%, rgba(168,85,247,0) 70%);
}
body::after{right:-10%;top:10%;width:55vw;height:50vh;filter:blur(90px);
  background:
    radial-gradient(50% 50% at 50% 50%, rgba(34,211,238,.18) 0%, rgba(34,211,238,0) 65%),
    radial-gradient(50% 50% at 70% 30%, rgba(168,85,247,.12) 0%, rgba(168,85,247,0) 70%);
}
[data-theme="dark"] body::before,[data-theme="dark"] body::after{display:none}

/* =========================================
   TOPBAR
========================================= */
.topbar{
  position:fixed; top:0; left:0; right:0; z-index:50;
  height: var(--header-height);
  background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7));
  backdrop-filter: blur(10px);
  border-bottom:1px solid var(--line);
}
[data-theme="dark"] .topbar{
  background:linear-gradient(180deg, rgba(10,11,20,.92), rgba(10,11,20,.65));
}
.topbar-inner{
  max-width:1200px; margin:0 auto;
  height:100%; padding:0 16px;
  display:flex; align-items:center; gap:16px;
  flex-wrap: nowrap;
}
@media (max-width:768px){ .topbar-inner{padding:0 12px} }

.brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
.logo-badge{width:28px;height:28px;border-radius:9px;
  background:linear-gradient(135deg,var(--primary),var(--primary2));
  box-shadow:0 0 0 6px rgba(124,92,252,.12),0 10px 25px rgba(124,92,252,.25);
  overflow:hidden;position:relative;display:grid;place-items:center}
.logo-badge img{width:100%;height:100%;object-fit:cover;border-radius:inherit}
.logo-badge::after{content:"";position:absolute;inset:0;border-radius:inherit;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.06);pointer-events:none}

/* Botones */
.btn{appearance:none;border:1px solid var(--line);background:var(--panel);color:var(--text);
  padding:10px 16px;border-radius:999px;font-weight:700;cursor:pointer;transition:.15s ease;
  font-size:.9rem;display:inline-flex;align-items:center;gap:8px}
.btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.10)}
.btn:active{transform:translateY(0)}
.btn:focus{outline:2px solid var(--ring);outline-offset:2px}
.btn.primary{background:linear-gradient(90deg,var(--primary),var(--primary2));border-color:transparent;color:#fff;box-shadow:0 8px 18px rgba(124,92,252,.28)}
.btn.ghost{background:transparent;border:1px solid var(--line)}
.btn.small{padding:8px 14px;font-size:.85rem}
.btn.danger{background:#fee2e2;border-color:#fecaca;color:#7f1d1d}
[data-theme="dark"] .btn.danger{background:#3b1d2a;border-color:#6b233a;color:#fce7f3}

/* =========================================
   LAYOUT – GRID
========================================= */
.wrap{
  max-width: var(--content-max-width);
  margin: 0 auto;
  padding: calc(var(--header-height) + 20px) 24px 24px;
  width: 100%;
}
.layout{
  display: grid;
  grid-template-columns: var(--sidebar-width) minmax(0, 1fr) var(--aside-width);
  gap: 24px;
  align-items: start;
  width: 100%;
  margin: 0 auto;
  max-width: 1280px;
}

.sidebar{min-height:1px}
.sidebar, .aside{ position: sticky; top: calc(var(--header-height) + 16px); align-self:start; height:max-content }

@media (max-width:1199.98px){
  .layout{ grid-template-columns: var(--sidebar-width) minmax(0,1fr); }
  .aside{ display:none; }
}
@media (max-width:959.98px){
  .wrap{ padding: calc(var(--header-height) + 16px) 16px 16px; }
  .layout{ grid-template-columns: 1fr; gap: 20px; max-width: 720px; }
  .sidebar, .aside{ position: static; }
}
@media (max-width:768px){
  .layout{ gap:16px }
  .wrap{ padding: calc(var(--header-height) + 14px) 16px 16px }
}
@media (max-width:480px){
  .layout{ gap:12px }
  .wrap{ padding: calc(var(--header-height) + 12px) 12px 12px }
}

/* =========================================
   CARDS & NAV
========================================= */
.card{background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);transition:.2s ease}
.card:hover{box-shadow:0 16px 40px rgba(124,92,252,.12)}

.nav{display:grid;gap:10px;padding:14px}
.nav-item{display:flex;gap:12px;align-items:center;padding:12px 14px;border-radius:12px;color:var(--text);text-decoration:none;border:1px solid transparent;transition:.15s ease;position:relative}
.nav-item:hover{background:rgba(124,92,252,.08);border-color:rgba(124,92,252,.15)}
.nav-item.active{background:rgba(124,92,252,.15);border-color:rgba(124,92,252,.35);color:var(--primary)}
.nav-ico{width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center}
.nav-ico svg{width:22px;height:22px;stroke:currentColor;fill:none;stroke-width:2}

.unread-badge{
  margin-left:auto; background:#ef4444; color:#fff; font-size:11px; font-weight:700;
  min-width:20px; height:20px; border-radius:10px; display:inline-flex;
  align-items:center; justify-content:center; padding:0 6px;
}

/* =========================================
   COMPOSER
========================================= */
.composer{
  padding: 18px; display: grid !important; gap: 14px;
  background: var(--card); border: 1px solid var(--line);
  border-radius: var(--r); box-shadow: var(--shadow);
  margin-bottom: 24px; width: 100%; max-width: 100%;
  position: relative; 
  overflow: hidden;
  justify-items: stretch !important;  /* por defecto, todo estira */
}
@media (max-width:768px){ .composer{padding:14px;gap:12px} }

/* Centrar solo el preview dentro del composer */
.composer > .cmp-preview{ justify-self: center !important; margin-inline:auto !important; }

.cmp-row{display:flex;gap:14px;align-items:flex-start;width:100%}
@media (max-width:480px){ .cmp-row{gap:10px} }

.cmp-avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--primary2));flex-shrink:0}
.cmp-input{
  flex:1; width:100%; min-height:90px; background:#f6f7fb;
  border:1px solid var(--line); border-radius:14px; color:var(--text);
  padding:14px; outline:none; font-size:.95rem; font-family:inherit; resize:none;
}
[data-theme="dark"] .cmp-input{background:#0b0f1d}
.cmp-input:focus{box-shadow:0 0 0 3px var(--ring);border-color:var(--primary)}

/* Preview (recuadro adaptable) */
.cmp-preview{
  display: flex; flex-direction: column; gap: 12px; align-items: center;
  padding: 16px; background: var(--bg2); border-radius: var(--r); border:1px solid var(--line);
  width: 100%; max-width: 800px; margin: 0 auto; box-sizing: border-box;
  position: relative;
}
.cmp-preview-main{
  width: 100% !important;
  min-height: 200px !important;
  max-height: 80vh !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: #000 !important;
  border-radius: 12px !important;
  overflow: hidden !important;
  position: relative;
}
.cmp-preview-img{
  max-width: 100% !important;
  max-height: 80vh !important;
  width: auto !important;
  height: auto !important;
  object-fit: contain !important;
  display: block !important;
}
.cmp-filter-badge{
  position:absolute; bottom:12px; right:12px;
  background: linear-gradient(135deg, rgba(124,92,252,0.95), rgba(168,85,247,0.95));
  color:#fff; padding:8px 16px; border-radius:12px; font-size:13px; font-weight:600;
  backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  z-index:2;
}
.cmp-remove-btn{ align-self:center; }

@media (max-width:768px){
  .cmp-preview{ max-width: 380px }
  .cmp-preview-main{ height: min(var(--preview-max-h-sm), 55vh) }
}

/* Barra de filtros: siempre dentro del card */
.cmp-filters-container{
  position: static !important;
  inset: auto !important;
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 !important;
  padding: 16px !important;
  background: transparent !important;
  border-top: 1px dashed var(--line) !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  z-index: auto !important;
}
.cmp-filters-label{
  font-size: 13px;
  color: var(--muted);
  margin: 0 0 12px 4px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.cmp-filters-scroll{
  display: grid !important;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)) !important;
  gap: 8px !important;
  padding: 4px !important;
  margin: 0;
  max-width: 100%;
  max-height: 200px;
  overflow-y: auto !important;
}
.cmp-filter-btn,
.cmp-filters-scroll .btn{
  width: 100%;
  height: 36px;
  padding: 0 12px;
  border-radius: 8px;
  border: 1px solid var(--line);
  background: var(--bg2);
  color: var(--text);
  font-weight: 600;
  font-size: .85rem;
  text-transform: capitalize;
  white-space: nowrap;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}
.cmp-filter-btn:hover,
.cmp-filters-scroll .btn:hover {
  background: var(--panel);
  border-color: var(--primary);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(124,92,252,0.15);
}
.cmp-filter-btn.active,
.cmp-filters-scroll .btn.active {
  background: var(--primary);
  border-color: var(--primary);
  color: white;
  box-shadow: 0 2px 8px rgba(124,92,252,0.25);
}
@media (max-width:768px){
  .cmp-filters-container{ padding:12px !important }
  .cmp-filters-scroll{ 
    grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)) !important;
    gap:6px !important; 
    padding:4px !important;
  }
  .cmp-filter-btn, 
  .cmp-filters-scroll .btn{ 
    height:38px; 
    padding:0 12px; 
    font-size:.85rem;
    border-radius: 10px;
  }
}
@media (max-width:480px){
  .cmp-filters-container{ padding:10px !important }
  .cmp-filters-scroll{ 
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)) !important;
    gap:4px !important;
  }
  .cmp-filter-btn, 
  .cmp-filters-scroll .btn{ 
    height:36px;
    font-size:.8rem;
    border-radius: 8px;
  }
}

.cmp-tools{display:flex;align-items:center;gap:10px}
.spacer{flex:1}
.cmp-msg{font-size:.92rem;color:var(--muted);min-height:16px;text-align:center}

/* =========================================
   FEED
========================================= */
.feed{
  display:grid; gap:24px; width:100%; max-width:680px; margin:0 auto; box-sizing:border-box;
}
@media (max-width:768px){ .feed{gap:16px} }
@media (max-width:480px){ .feed{gap:12px} }

.post-card{
  overflow:hidden; background:var(--card); border:1px solid var(--line);
  border-radius:var(--r); box-shadow:var(--shadow); transition:.2s ease; width:100%;
}
.post-head{
  display:flex; align-items:center; gap:12px; padding:16px; border-bottom:1px solid var(--line); width:100%;
}
.post-ava{
  width:44px; height:44px; border-radius:50%; object-fit:cover;
  background:linear-gradient(135deg,var(--primary),var(--primary2));
  cursor:pointer; transition:.2s ease; flex-shrink:0;
}
.post-ava:hover{transform:scale(1.05);box-shadow:0 4px 12px rgba(124,92,252,.3)}
.post-user{display:grid;line-height:1.2;flex:1}
.post-name{font-weight:700;color:var(--text);text-decoration:none;transition:.15s ease}
.post-name:hover{color:var(--primary)}
.post-userid{color:var(--muted);font-size:.85rem}

/* Media del feed */
.post-media{ position:relative; background:#000; cursor:pointer; overflow:hidden; }
.post-media img,.post-media video{width:100%;height:100%;object-fit:contain;display:block}
.post-media.ratio-square{ aspect-ratio: 1 / 1; }
.post-media.ratio-portrait{ aspect-ratio: 4 / 5; }
.post-media.ratio-landscape{ aspect-ratio: 16 / 9; }
.post-video{max-height:600px;background:#000}

.post-actions{display:flex;gap:12px;align-items:center;padding:14px 16px;border-top:1px solid var(--line)}
.btn-icon{
  display:inline-flex; align-items:center; justify-content:center; gap:2px;
  min-width:48px; height:44px; padding:0 14px; border-radius:999px;
  border:1px solid transparent; background:transparent; color:var(--text);
  cursor:pointer; transition:.15s ease; font-weight:600; font-size:.95rem;
}
.btn-icon:hover{background:rgba(124,92,252,.08)}
.btn-icon:active{background:rgba(124,92,252,.15);transform:scale(0.95)}
.btn-icon i,.btn-icon i svg,.btn-icon svg{width:24px;height:24px;flex-shrink:0;stroke:currentColor;fill:none;stroke-width:2}
.btn-icon[aria-pressed="true"]{color:var(--accent)}
.btn-icon[aria-pressed="true"] svg{stroke:var(--accent);fill:var(--accent)}
.btn-icon span{line-height:1;font-size:1rem;font-weight:600;display:inline-block;min-width:16px;text-align:center}
.post-caption{padding:0 16px 16px;color:var(--text);line-height:1.5;font-size:.95rem}

/* =========================================
   PEOPLE / ASIDE
========================================= */
.people-list{
  display:grid; gap:14px;
  max-height: calc(100vh - 300px);
  overflow-y:auto; padding-right:8px; margin-right:-8px;
}
.people-list::-webkit-scrollbar{ width:6px; height:6px }
.people-list::-webkit-scrollbar-track{ background:transparent }
.people-list::-webkit-scrollbar-thumb{ background:var(--line); border-radius:4px }
.people-list::-webkit-scrollbar-thumb:hover{ background: color-mix(in srgb, var(--primary) 30%, var(--line)) }

.person-row{
  display:flex; flex-direction:column; gap:12px;
  border:1px solid var(--line); border-radius:16px; padding:14px;
  background:var(--panel); transition:.2s ease
}
.person-row:hover{
  background:rgba(124,92,252,.06);
  border-color:rgba(124,92,252,.25);
  box-shadow:0 4px 12px rgba(124,92,252,.1)
}
.p-top{display:flex;gap:12px;align-items:center;width:100%}
.p-avatar img{width:48px;height:48px;border-radius:50%;object-fit:cover;border:2px solid rgba(124,92,252,.2)}
.p-info{min-width:0;flex:1}
.p-name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--text);font-size:.95rem}
.p-user{color:var(--muted);font-size:.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}
.p-actions{display:flex;gap:8px;width:100%}
.p-actions .btn{flex:1;justify-content:center;padding:8px 12px;font-size:.85rem;white-space:nowrap}

/* =========================================
   LIGHTBOX
========================================= */
.lightbox{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.65);z-index:100;padding:20px;backdrop-filter:blur(4px)}
.lightbox[aria-hidden="false"]{display:flex}
.lb-content{
  display:grid; grid-template-columns:min(62vw,760px) 380px; gap:0;
  background:var(--card); border:1px solid var(--line); border-radius:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.35); overflow:hidden; max-height:90vh;
  width:90vw; max-width:1140px
}
@media (max-width:1080px){ .lb-content{ grid-template-columns:1fr; max-height:85vh; width:95vw } }
@media (max-width:480px){
  .lb-content{ width:100vw; height:100vh; max-height:100vh; border-radius:0 }
  .lightbox{ padding:0 }
}
.lb-close{position:absolute;right:16px;top:16px;z-index:10}
.lb-media{background:#000;display:flex;align-items:center;justify-content:center;min-height:400px;max-height:90vh}
.lb-media img{display:block;width:100%;height:100%;object-fit:contain;max-height:90vh}
.lb-side{display:grid;grid-template-rows:auto 1fr auto auto;background:var(--panel)}
.lb-head{display:flex;gap:12px;align-items:center;padding:16px;border-bottom:1px solid var(--line)}
.lb-ava{width:40px;height:40px;border-radius:50%;object-fit:cover}
.lb-body{padding:12px;display:grid;gap:8px;max-height:50vh;overflow-y:auto}
.lb-cmt{display:flex;gap:6px;align-items:flex-start;line-height:1.25;font-size:14px}
.lb-cmt .nm-wrap{display:inline}
.lb-cmt .nm{font-weight:700;color:var(--primary)}
.lb-cmt .user-link{color:var(--primary);text-decoration:none;transition:all 0.2s}
.lb-cmt .user-link:hover{text-decoration:underline;color:var(--primary-hover, #a855f7)}
.lb-cmt .dt{color:var(--muted);font-size:.8rem;white-space:nowrap;flex-shrink:0}
.lb-actions{display:flex;align-items:center;gap:8px;padding:12px 16px;border-top:1px solid var(--line);background:var(--panel);flex-wrap:nowrap}
.lb-input{display:flex;gap:10px;padding:16px;border-top:1px solid var(--line)}
.lb-input input{flex:1;background:var(--bg2);border:1px solid var(--line);border-radius:12px;color:var(--text);padding:12px}
[data-theme="dark"] .lb-input input{background:#0b0f1d}
.lb-input input:focus{box-shadow:0 0 0 3px var(--ring)}
.lb-input .btn{display:flex;align-items:center;gap:6px;white-space:nowrap;padding:10px 18px;font-weight:700;font-size:.9rem}
.lb-input .btn svg{flex-shrink:0}
.lb-actions .post-counts{ margin-left:auto; white-space:nowrap; line-height:1; display:flex; gap:6px }
.lb-actions .btn-icon{ width:42px; height:38px; gap:6px; padding:0 8px }
.lb-actions .btn-icon i,.lb-actions .btn-icon i svg,.lb-actions .btn-icon svg{ width:22px; height:22px; vertical-align:middle; stroke:currentColor; fill:none; stroke-width:2 }
.lb-actions .btn-icon[aria-pressed="true"] svg{ fill:var(--accent); stroke:var(--accent) }

/* =========================================
   RESPONSIVE EXTRA
========================================= */
@media(max-width:768px){
  .composer{padding:14px;margin-bottom:16px}
  .cmp-avatar{width:40px;height:40px}
  .cmp-input{min-height:70px;padding:12px;font-size:0.9rem}
  .feed{gap:16px}
  .post-head{padding:12px}
  .post-actions{padding:10px 12px}
  .post-caption{padding:0 12px 12px;font-size:0.9rem}
}
@media(max-width:600px){
  .btn{padding:7px 12px;font-size:0.85rem}
  .cmp-input{min-height:60px}
  .btn-icon{width:40px;height:36px}
  .btn-icon i,.btn-icon svg{width:20px;height:20px}
}

