/* ====== LIGHT TOKENS (Recroot-like) ====== */
:root{
  --bg:#f8f9fc; --panel:#fff; --panel2:#f6f7fb; --line:#e5e7eb;
  --text:#1e293b; --muted:#64748b; --accent:#0ea5e9; --primary:#8b5cf6;
  --primary2:#a855f7; --ring:rgba(96,165,250,.18);
}

/* ====== DARK TOKENS (Neo Purple) ====== */
[data-theme="dark"]{
  --bg:#0f172a; --panel:#121a2a; --panel2:#0b1323; --line:#1f2a3a;
  --text:#e6edf7; --muted:#94a3b8; --accent:#60a5fa; --primary:#8b5cf6;
  --primary2:#a855f7; --ring:rgba(96,165,250,.18);
}

/* ===== Base / layout ===== */
*{ box-sizing:border-box }
html,body{ height:100%; margin:0; padding:0 }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:'Plus Jakarta Sans', system-ui, Segoe UI, Roboto, Arial, sans-serif;
  overflow-x:hidden;
  position:relative;
}

/* Glow background - LIGHT (sutil) */
body::before, body::after{
  content:""; position:fixed; inset:auto; pointer-events:none; z-index:-1;
}
body::before{
  top:-15%; left:-10%; width:65vw; height:55vh; filter:blur(90px);
  background:radial-gradient(circle, rgba(139,92,246,.08) 0%, rgba(168,85,247,.05) 35%, transparent 70%);
}
body::after{
  right:-10%; top:10%; width:55vw; height:50vh; filter:blur(90px);
  background:radial-gradient(circle, rgba(168,85,247,.06) 0%, rgba(139,92,246,.04) 40%, transparent 70%);
}

/* Glow background - DARK (intenso) */
[data-theme="dark"] body::before{
  background:radial-gradient(circle, rgba(139,92,246,.35) 0%, rgba(168,85,247,.25) 35%, transparent 70%);
}
[data-theme="dark"] body::after{
  background:radial-gradient(circle, rgba(168,85,247,.3) 0%, rgba(139,92,246,.2) 40%, transparent 70%);
}

/* Layout principal */
.wrap{ min-height:100vh; display:flex; flex-direction:column }
.layout{ display:flex; flex:1; max-width:1320px; margin:0 auto; width:100%; padding:20px; gap:24px }

/* Sidebar */
.sidebar{ width:240px; flex-shrink:0 }
.nav{ display:flex; flex-direction:column; gap:4px; position:sticky; top:80px }
.nav-item{ 
  display:flex; align-items:center; gap:12px; padding:12px 16px;
  border-radius:12px; text-decoration:none; color:var(--muted);
  transition:all .15s ease; font-weight:500; border:1px solid transparent;
}
.nav-item:hover{ 
  background:rgba(124,92,252,.08); 
  border-color:rgba(124,92,252,.15);
  color:var(--text);
}
.nav-item.active{ 
  background:rgba(124,92,252,.15); 
  border-color:rgba(124,92,252,.35); 
  color:var(--primary); 
  font-weight:600;
}
.nav-ico{ width:24px; height:24px; display:flex; align-items:center; justify-content:center }
.nav-ico svg{ width:100%; height:100%; stroke:currentColor; fill:none; stroke-width:2 }
.nav-item.active .nav-ico svg{ stroke:var(--primary) }

/* Main content */
.main{ flex:1; min-width:0 }

@media (max-width:768px){
  .layout{ flex-direction:column; padding:12px }
  .sidebar{ width:100%; position:sticky; top:60px; background:var(--bg); z-index:40; padding-bottom:12px }
  .nav{ flex-direction:row; position:static; overflow-x:auto }
  .nav-item{ flex-shrink:0 }
}

/* ===== Topbar ===== */
.topbar{ 
  position:sticky; top:0; z-index:50; 
  background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7));
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--line);
}
[data-theme="dark"] .topbar{
  background:linear-gradient(180deg, rgba(10,11,20,.92), rgba(10,11,20,.65));
}
.topbar-inner{ max-width:1200px; margin:0 auto; padding:12px 20px; display:flex; align-items:center; justify-content:space-between }
.profile-page .topbar-inner{ max-width:1320px }
.brand{ font-weight:900; letter-spacing:.5px; display:flex; align-items:center; gap:10px }
.topbar-actions{ display:flex; gap:10px }
.btn{ 
  padding:8px 14px; border-radius:999px; border:1px solid var(--line); 
  background:var(--panel); color:var(--text); cursor:pointer; font-weight:700;
  transition:all .15s ease; outline:none;
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 4px 12px rgba(0,0,0,.1) }
[data-theme="dark"] .btn:hover{ box-shadow:0 4px 12px rgba(0,0,0,.4) }
.btn:active{ transform:translateY(0); opacity:0.9 }
.btn.small{ padding:6px 12px; font-size:.9rem }
.btn.danger{ background:#fee2e2; border-color:#fecaca; color:#7f1d1d }
[data-theme="dark"] .btn.danger{ background:#3b1d2a; border-color:#6b233a; color:#fce7f3 }
.btn.primary{
  background:linear-gradient(90deg,var(--primary),var(--primary2));
  border-color:transparent; color:#fff;
  box-shadow:0 8px 18px rgba(124,92,252,.28);
}
.btn.primary:hover{ box-shadow:0 12px 24px rgba(124,92,252,.35) }
.btn.ghost{
  background:transparent; border:1px solid var(--line);
}
.btn.ghost:hover{
  background:rgba(124,92,252,.08); border-color:rgba(124,92,252,.2);
}

/* ===== Tarjeta cabecera de perfil (moradito intenso) ===== */
.profile-header{
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--panel) 85%, var(--primary) 15%),
    color-mix(in srgb, var(--panel) 92%, var(--primary) 8%) 35%, 
    var(--panel) 100%);
  border:1px solid rgba(139,92,246,.35);
  box-shadow:
    0 0 0 1px rgba(139,92,246,.08) inset,
    0 10px 30px rgba(124,92,252,.22),
    0 0 60px rgba(139,92,246,.15);
  border-radius:16px; overflow:hidden;
  margin-bottom:24px;
  position:relative;
}

/* Efecto glow sutil en el header */
.profile-header::before{
  content:""; position:absolute; top:0; left:0; right:0; height:100%;
  background:radial-gradient(ellipse at top, rgba(139,92,246,.1) 0%, transparent 70%);
  pointer-events:none; z-index:0;
}
.profile-header > *{ position:relative; z-index:1 }

/* Banner opcional dentro de .profile-header */
.profile-header .banner{
  height:280px;
  background: linear-gradient(135deg,#6d5efc 0%, #8b5cf6 50%, #a78bfa 100%);
  border-bottom:1px solid rgba(255,255,255,.06);
}

/* Fila inferior: avatar, nombre, stats, acciones */
.profile-info{ padding:16px 18px }
.profile-header-top{ display:flex; align-items:center; gap:16px; flex-wrap:wrap }

/* Avatar sobre el banner */
.profile-avatar{
  width:120px; height:120px; border-radius:26px; object-fit:cover;
  margin-top:-72px; border:3px solid color-mix(in srgb, var(--bg) 70%, var(--panel));
  background:#0b1323;
}

/* Nombre / usuario */
.profile-header-top h1{ margin:0; font-size:28px; font-weight:900; line-height:1.1 }
.profile-username{ color:#9aa4b2; font-size:14px }

/* Stats */
.profile-stats{ display:flex; gap:24px; margin-top:10px; color:#cbd5e1 }
.stat{ display:flex; flex-direction:column; align-items:flex-start; gap:2px }
.stat strong{ color:#e9e7ff; font-size:18px }

/* Bio */
.profile-bio{
  margin-top:14px; font-size:1rem; line-height:1.65; max-width:920px;
  color:var(--text);
}

/* Acciones (seguir / editar) */
.profile-actions{ margin-left:auto; display:flex; gap:8px; flex-wrap:wrap }
.profile-actions .btn.ghost{ background:transparent; color:#dbe8ff }

/* ===== Sección de publicaciones (moradito sutil con glow) ===== */
.posts-section{
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--panel) 88%, var(--primary) 12%),
    color-mix(in srgb, var(--panel) 94%, var(--primary) 6%) 40%, 
    var(--panel) 100%);
  border:1px solid rgba(139,92,246,.3);
  box-shadow: 
    0 10px 30px rgba(124,92,252,.18),
    0 0 40px rgba(139,92,246,.12);
  border-radius:16px; padding:16px;
  position:relative;
}
.posts-section::before{
  content:""; position:absolute; top:0; left:0; right:0; height:50%;
  background:radial-gradient(ellipse at top, rgba(139,92,246,.08) 0%, transparent 70%);
  pointer-events:none;
}
.posts-section h2{ margin:4px 6px 16px; font-size:18px; position:relative; z-index:1 }

/* Grid de posts (estilo IG) */
.posts-grid, .grid-ig{
  display:grid; gap:12px;
  grid-template-columns:repeat(3, minmax(0,1fr));
}
@media (min-width:1200px){
  .posts-grid, .grid-ig{ grid-template-columns:repeat(4, minmax(0,1fr)) }
}
.post-item, .ig-item{
  aspect-ratio:1/1; border-radius:12px; overflow:hidden; background:var(--panel2);
  border:1px solid rgba(139,92,246,.28);
  box-shadow:0 6px 20px rgba(124,92,252,.18), 0 0 20px rgba(139,92,246,.08);
  position:relative; cursor:pointer; transition:all .2s ease;
}
.post-item:hover, .ig-item:hover{ 
  transform:translateY(-2px); 
  box-shadow:0 8px 25px rgba(124,92,252,.28), 0 0 30px rgba(139,92,246,.15);
  border-color:rgba(139,92,246,.4);
}
.post-item img, .ig-item img{ width:100%; height:100%; object-fit:cover; display:block }

/* Overlay de stats en hover */
.post-item-overlay{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  gap:20px; color:#fff; font-weight:700; background:rgba(0,0,0,0); transition:background .2s ease;
}
.post-item:hover .post-item-overlay{ background:rgba(0,0,0,.45) }
.stat-overlay{ display:flex; align-items:center; gap:8px; font-size:16px }

/* ===== Lightbox / visor de publicación ===== */
.lightbox{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.65); z-index:90 }
.lightbox[aria-hidden="false"]{ display:flex }
.lb-content{
  position:relative; width:min(935px,96vw); height:min(90vh,820px);
  display:flex; background:var(--panel); border:1px solid var(--line);
  border-radius:16px; overflow:hidden; box-shadow:0 20px 80px rgba(0,0,0,.6);
}
.lb-close{ position:absolute; top:10px; right:10px; background:#0008; color:#fff; border:0; border-radius:999px; width:36px; height:36px; cursor:pointer }
.lb-media{ flex:1 1 65%; background:#000; display:flex; align-items:center; justify-content:center }
.lb-media img{ max-width:100%; max-height:100%; object-fit:contain; display:block }
.lb-side{ flex:1 1 35%; display:flex; flex-direction:column; border-left:1px solid var(--line); background:var(--panel) }
.lb-head{ display:flex; align-items:center; gap:10px; padding:12px; border-bottom:1px solid var(--line) }
.lb-ava{ width:36px; height:36px; border-radius:999px; object-fit:cover }
.lb-body{ flex:1; overflow:auto; padding:12px }
.lb-cmt{ margin-bottom:10px; line-height:1.35 }
.lb-cmt .nm{ font-weight:600; margin-right:8px }
.lb-cmt .dt{ color:var(--muted); font-size:12px; margin-left:8px }
.lb-input{ display:flex; gap:8px; padding:10px; border-top:1px solid var(--line) }
.lb-input input{ flex:1; padding:10px 12px; border:1px solid var(--line); background:var(--panel2); color:var(--text); border-radius:10px }

/* ===== Utilidades ===== */
.muted{ color:var(--muted) }
.logo-badge{ 
  width:28px; height:28px; border-radius:9px; overflow:hidden; display:grid; place-items:center;
  background:linear-gradient(135deg, var(--primary), var(--primary2));
  box-shadow:0 0 0 6px rgba(124,92,252,.12), 0 10px 25px rgba(124,92,252,.35);
  position:relative;
}
.logo-badge::after{
  content:""; position:absolute; inset:0; border-radius:inherit;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.06);
  pointer-events:none;
}
.logo-badge img{ width:100%; height:100%; object-fit:cover; display:block }

/* ===== Modales ===== */
.backdrop{
  position:fixed; inset:0; z-index:100; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.75); backdrop-filter:blur(4px);
}
.backdrop[data-open="true"]{ display:flex }

.modal{
  background:var(--panel); border:1px solid var(--line); border-radius:16px;
  max-width:500px; width:90vw; max-height:85vh; display:flex; flex-direction:column;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
}
.modal-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px; border-bottom:1px solid var(--line);
}
.modal-head h3{ margin:0; font-size:18px; font-weight:700 }
.modal-body{ padding:16px 18px; overflow-y:auto; flex:1 }
.modal-body > div{ margin-bottom:16px }
.modal-body > div:last-child{ margin-bottom:0 }
.modal-foot{
  display:flex; align-items:center; justify-content:flex-end; gap:12px;
  padding:14px 18px; border-top:1px solid var(--line);
}

/* Tabs */
.tabs{ display:flex; gap:8px }
.tabs .btn{ border-radius:8px }
.tabs .btn.active{ background:var(--primary); color:#fff }

/* Form elements */
.form{ display:flex; flex-direction:column; gap:14px }
.form label{ font-weight:600; font-size:13px; color:var(--text); margin-bottom:6px; display:block }
.form input, .form textarea{
  width:100%; padding:9px 12px; border:1px solid var(--line); background:var(--panel2);
  color:var(--text); border-radius:8px; font-family:inherit; font-size:14px;
}
.form input:focus, .form textarea:focus{
  outline:none; border-color:var(--accent); box-shadow:0 0 0 3px var(--ring);
}
.input{
  padding:10px 12px; border:1px solid var(--line); background:var(--panel2);
  color:var(--text); border-radius:10px; font-family:inherit; font-size:14px;
}
[data-theme="dark"] .form input, 
[data-theme="dark"] .form textarea,
[data-theme="dark"] .input,
[data-theme="dark"] .lb-input input{
  background:#0b0f1d;
}

/* Banner preview en modal */
.banner-preview{
  width:100%; height:140px; border-radius:10px; overflow:hidden;
  background:linear-gradient(135deg,#6d5efc 0%, #8b5cf6 50%, #a78bfa 100%);
  background-size:cover; background-position:center; margin-bottom:10px;
}

/* Avatar en modal */
.avatar{
  width:90px; height:90px; border-radius:18px; overflow:hidden;
  position:relative; display:flex; align-items:center; justify-content:center;
  background:var(--panel2); margin-bottom:10px;
}
.avatar.avatar-xl{ width:90px; height:90px }
.avatar-img, .avatar-txt{ width:100%; height:100% }
.avatar-img{ object-fit:cover }
.avatar-txt{
  display:flex; align-items:center; justify-content:center;
  font-size:36px; font-weight:700; color:var(--accent);
}

/* Lista de usuarios (para modales de seguidores) */
.list-users{ display:flex; flex-direction:column; gap:8px; max-height:400px; overflow-y:auto }
.user-row{
  display:flex; align-items:center; gap:12px; padding:10px;
  border-radius:10px; background:var(--panel2); border:1px solid var(--line);
}
.user-row img{ width:48px; height:48px; border-radius:12px; object-fit:cover }
.u-info{ flex:1; min-width:0 }
.u-name{ font-weight:600; font-size:14px }
.u-nick{ color:var(--muted); font-size:13px }
.u-actions{ display:flex; gap:6px }

/* Badge verificado */
.badge{
  display:inline-block; margin-left:4px; color:var(--accent);
  font-size:14px; vertical-align:middle;
}

/* ===== RESPONSIVE DESIGN ===== */

/* Tablets y pantallas medianas (max-width: 1024px) */
@media (max-width:1024px){
  .layout{ max-width:100%; padding:16px; gap:20px }
  .topbar-inner{ padding:10px 16px }
  .profile-page .topbar-inner{ max-width:100% }
  
  .profile-header .banner{ height:200px }
  .profile-avatar{ width:100px; height:100px; margin-top:-50px }
  .profile-header-top h1{ font-size:24px }
  
  .posts-grid, .grid-ig{ 
    grid-template-columns:repeat(3, minmax(0,1fr));
    gap:10px;
  }
}

/* Mobile landscape y tablets pequeñas (max-width: 768px) */
@media (max-width:768px){
  body{ font-size:15px }
  
  .topbar-inner{ padding:10px 12px }
  .brand{ font-size:16px }
  .btn.small{ padding:6px 10px; font-size:0.8rem }
  
  .layout{ 
    flex-direction:column; 
    padding:12px; 
    gap:16px;
  }
  
  .sidebar{ 
    width:100%; 
    position:sticky; 
    top:56px; 
    background:var(--bg); 
    z-index:40; 
    padding:8px 0;
    border-bottom:1px solid var(--line);
  }
  
  .nav{ 
    flex-direction:row; 
    position:static; 
    overflow-x:auto; 
    gap:6px;
    padding:0 4px;
    scrollbar-width:none;
    -ms-overflow-style:none;
  }
  .nav::-webkit-scrollbar{ display:none }
  
  .nav-item{ 
    flex-shrink:0; 
    padding:10px 14px;
    font-size:0.9rem;
    white-space:nowrap;
  }
  .nav-item span:not(.nav-ico){ display:none }
  
  .main{ padding:0 }
  
  .profile-header{ margin-bottom:16px }
  .profile-header .banner{ height:160px }
  .profile-avatar{ width:80px; height:80px; margin-top:-40px; border-width:3px }
  .profile-header-top{ gap:12px }
  .profile-header-top h1{ font-size:20px }
  .profile-username{ font-size:13px }
  .profile-stats{ gap:16px; margin-top:8px }
  .stat strong{ font-size:16px }
  .stat span{ font-size:12px }
  .profile-bio{ font-size:0.9rem; margin-top:10px }
  .profile-info{ padding:12px 14px }
  
  .profile-actions{ 
    width:100%; 
    margin-left:0; 
    margin-top:12px;
    justify-content:stretch;
  }
  .profile-actions .btn{ flex:1 }
  
  .posts-section{ padding:12px; margin-bottom:60px }
  .posts-section h2{ font-size:16px; margin:2px 4px 12px }
  
  .posts-grid, .grid-ig{ 
    grid-template-columns:repeat(3, minmax(0,1fr));
    gap:6px;
  }
  
  /* Lightbox mobile */
  .lb-content{ 
    width:100vw; 
    height:100vh; 
    border-radius:0;
    flex-direction:column;
  }
  .lb-media{ 
    flex:1 1 auto;
    max-height:60vh;
  }
  .lb-side{ 
    flex:0 0 auto;
    border-left:none;
    border-top:1px solid var(--line);
    max-height:40vh;
  }
  .lb-close{ 
    top:8px; 
    right:8px;
    width:32px;
    height:32px;
  }
  
  /* Modales mobile */
  .modal{ 
    max-width:95vw; 
    max-height:90vh;
    padding:16px;
  }
  .modal-head{ padding:12px 16px }
  .modal-body{ padding:16px }
  .modal-foot{ padding:12px 16px }
  
  .banner-preview{ height:120px }
  .avatar.avatar-xl{ width:80px; height:80px }
  .avatar-txt{ font-size:28px }
  
  .tabs{ flex-wrap:wrap }
  .tabs .btn{ font-size:0.85rem }
}

/* Mobile portrait (max-width: 480px) */
@media (max-width:480px){
  body{ font-size:14px }
  
  .topbar-inner{ padding:8px 10px }
  .brand{ font-size:15px; gap:6px }
  .logo-badge{ width:24px; height:24px }
  .btn{ padding:7px 12px; font-size:0.85rem }
  .btn.small{ padding:5px 8px; font-size:0.75rem }
  
  .layout{ padding:8px; gap:12px }
  
  .sidebar{ top:52px; padding:6px 0 }
  .nav{ gap:4px }
  .nav-item{ padding:8px 12px; font-size:0.85rem }
  
  .profile-header .banner{ height:120px }
  .profile-avatar{ width:64px; height:64px; margin-top:-32px; border-width:2px }
  .profile-header-top{ flex-direction:column; align-items:flex-start; gap:8px }
  .profile-header-top h1{ font-size:18px }
  .profile-username{ font-size:12px }
  
  .profile-stats{ 
    flex-wrap:wrap; 
    gap:12px;
    width:100%;
  }
  .stat{ 
    flex:1; 
    min-width:80px;
    align-items:center;
    text-align:center;
  }
  .stat strong{ font-size:15px }
  .stat span{ font-size:11px }
  
  .profile-bio{ font-size:0.85rem; line-height:1.5 }
  .profile-info{ padding:10px 12px }
  
  .profile-actions{ 
    flex-direction:column; 
    width:100%;
    gap:6px;
  }
  .profile-actions .btn{ width:100% }
  
  .posts-section{ padding:10px; border-radius:12px }
  .posts-section h2{ font-size:15px; margin:0 2px 10px }
  
  .posts-grid, .grid-ig{ 
    grid-template-columns:repeat(3, minmax(0,1fr));
    gap:4px;
  }
  
  .post-item, .ig-item{ border-radius:8px }
  
  /* Lightbox extra pequeño */
  .lb-media{ max-height:50vh }
  .lb-side{ max-height:50vh }
  .lb-head{ padding:10px }
  .lb-ava{ width:32px; height:32px }
  .lb-body{ padding:10px }
  .lb-input{ padding:8px; gap:6px }
  .lb-input input{ padding:8px 10px; font-size:0.9rem }
  .lb-cmt{ font-size:0.9rem; margin-bottom:8px }
  .lb-cmt .nm{ font-size:0.9rem }
  .lb-cmt .dt{ font-size:11px }
  
  /* Modales extra pequeños */
  .modal{ 
    max-width:98vw;
    padding:12px;
  }
  .modal-head h3{ font-size:16px }
  .modal-body{ padding:12px }
  .modal-foot{ padding:10px 12px; flex-direction:column }
  
  .form label{ font-size:12px }
  .form input, .form textarea{ 
    padding:8px 10px; 
    font-size:13px;
  }
  
  .banner-preview{ height:100px; border-radius:8px }
  .avatar.avatar-xl{ width:64px; height:64px }
  .avatar-txt{ font-size:22px }
  
  .user-row{ padding:8px; gap:10px }
  .user-row img{ width:40px; height:40px }
  .u-name{ font-size:13px }
  .u-nick{ font-size:12px }
  .u-actions .btn{ padding:6px 10px; font-size:0.8rem }
}

/* Extra small devices (max-width: 360px) */
@media (max-width:360px){
  .topbar-inner{ padding:6px 8px }
  .brand{ font-size:14px }
  
  .posts-grid, .grid-ig{ gap:3px }
  .post-item, .ig-item{ border-radius:6px }
  
  .profile-header .banner{ height:100px }
  .profile-avatar{ width:56px; height:56px; margin-top:-28px }
  .profile-header-top h1{ font-size:16px }
  
  .modal{ padding:10px }
  .modal-head{ padding:10px }
  .modal-body{ padding:10px }
}
